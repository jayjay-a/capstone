<p id="notice"><%= notice %></p>

<h1>Projects</h1>

  <%# button to open up the modal at bottom which has filter options%>
  <a class="waves-effect waves-light btn modal-trigger" href="#modal1">  <i class="material-icons">filter_list</i></a>

  <%# modal at bottom for filtering options %>
  <div id="modal1" class="modal bottom-sheet"><%# start modal %>
    <div class="modal-content">
      <h4>Modal Header</h4>
      <%# using ransack to search for these inputs%>
      <%= search_form_for @search, url: search_projects_path, html: { method: :post } do |f| %>
        <%= f.text_field :project_start_date_gteq, placeholder: "YYYY-MM-DD", :class => 'datepicker' %>
        <%= f.text_field :project_end_date_lteq, placeholder: "YYYY-MM-DD", :class => 'datepicker' %>

        <%= f.collection_select :project_status_id_eq, ProjectStatus.all, :project_status_id, :project_status_description ,{prompt: "Select a status"}, :class => 'browser-default'%>

        <%= f.submit 'Submit', class: "btn" %>
      <% end %>
    </div>
  </div> <%# end modal %>

<table class="responsive-table">
  <thead>
    <tr>
      <th>Project ID</th>
      <th>Customer</th>
      <th>Customer branch</th>
      <th>Project type</th>
      <th>Project status</th>
      <th>Project start date</th>
      <th>Project end date</th>

      <% comment do %> these are unused in the index page. just here for easy access if needed
      <th>Bid submit date</th>
      <th>Bid material cost</th>
      <th>Bid cost of labor</th>
      <th>Bid cost of permits</th>
      <th>Bid equipment rental</th>
      <th>Bid freight</th>
      <th>Tax rate</th>
      <th>Bid fuel cost</th>
      <th>Bid lodging cost</th>
      <th>Bid amount</th>
      <% comment end %>

      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @projects.each do |project| %>
      <tr>
        <td><%= project.project_id %></td>
        <td><%= project.customer.customer_name %></td>
        <td><%= project.customer.customer_branch %></td>
        <td><%= project.project_type.project_type_description %></td>
        <td><%= project.project_status.project_status_description %></td>
        <td><%= project.project_start_date %></td>
        <td><%= project.project_end_date %></td>

        <% comment do %> these are unused in the index page. just here for easy access if needed
        <td><%= project.bid_submit_date %></td>
        <td><%= number_to_currency(project.bid_material_cost) %></td>
        <td><%= number_to_currency(project.bid_cost_of_labor) %></td>
        <td><%= number_to_currency(project.bid_cost_of_permits) %></td>
        <td><%= number_to_currency(project.bid_equipment_rental) %></td>
        <td><%= number_to_currency(project.bid_freight) %></td>
        <td><%= number_to_currency(project.bid_fuel_cost) %></td>
        <td><%= number_to_currency(project.bid_lodging_cost) %></td> %>
        <td><%= number_to_percentage(project.tax_rate) %></td>
        <td><%= number_to_currency(project.bid_amount) %></td> %>

        <% comment end %>

        <td><%= link_to 'Show', project %></td>
        <td><%= link_to 'Edit', edit_project_path(project) %></td>
        <td><%= link_to 'Destroy', project, method: :delete, data: { confirm: 'Are you sure?' } %></td>
      </tr>
    <% end %>
  </tbody>
</table>

<br>

<%= link_to 'New Project', new_project_path %>
